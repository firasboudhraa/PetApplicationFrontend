<div class="container mt-4">
    <h2 class="mb-3">Posts List</h2>
  
    <table class="table table-striped align-middle">
      <thead class="thead-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Image</th>
          <th scope="col">Title</th>
          <th scope="col">Author</th>
          <th scope="col">Type</th>
          <th scope="col">Likes</th>
          <th scope="col">Comments</th>
          <th scope="col">Created At</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let post of posts; let i = index">
          <!-- Main Post Row -->
          <tr>
            <th scope="row">{{ i + 1 }}</th>
            <td>
              <img [src]="'http://localhost:8082/posts/images/' + post.imageUrl"
                   alt="Post Image"
                   style="width: 60px; height: 60px; object-fit: cover; border-radius: 5px;">
            </td>
            <td>{{ post.title }}</td>
            <td>{{ userNames.get(post.userId) }}</td>
            <td>{{ post.type }}</td>
            <td>{{ post.likedBy.length || 0 }}</td>
            <td>{{ commentCounts[post.id] || 0 }}</td>
            <td>{{ post.createdAt | date: 'medium' }}</td>
            <td>
              <button class="btn btn-danger btn-sm" (click)="deletePost(post.id)">Delete</button>
            </td>
          </tr>
  
          <!-- Stylish Comments Section -->
          <tr>
            <td colspan="9">
              <div class="bg-light p-3 rounded shadow-sm mt-2">
                <h6 class="mb-3 text-success">
                  Commentaires pour <em>"{{ post.title }}"</em>
                </h6>
  
                <ul class="list-group" *ngIf="postComments[post.id] && postComments[post.id].length > 0; else noComments">
                  <li *ngFor="let comment of postComments[post.id]" class="list-group-item d-flex justify-content-between align-items-center border-0 border-bottom">
                    <div>
                      <strong class="text-primary">{{ userNames.get(comment.userId) || 'Inconnu' }}:</strong>
                      <span>{{ comment.content }}</span>
                    </div>
                    <button class="btn btn-sm btn-outline-danger" (click)="deleteComment(comment.id, post.id)">Supprimer</button>
                  </li>
                </ul>
  
                <ng-template #noComments>
                  <p class="text-muted">Aucun commentaire pour ce post.</p>
                </ng-template>
              </div>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
  