<div class="pet-sitting-space-container">
    <h2 class="title">Owners Seeking Sitters</h2>
  
    <!-- Search and Filter Section -->
    <div class="search-filter-section">
      <input
        type="text"
        class="search-bar"
        placeholder="Search by location, pet type, or sitter name..."
        [(ngModel)]="searchText"
        (input)="applyFilter()"
      />
      <!-- Offer Type -->
      <div class="filter-dropdown">
        <button
          class="btn btn-light dropdown-toggle me-1"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
         <i class="fas fa-coins"></i> Offer Type
        </button>
        <ul class="dropdown-menu">
          <li>
            <a class="dropdown-item" (click)="applyFilter('offerType', '')"
              >All</a
            >
          </li>
          <li>
            <a class="dropdown-item" (click)="applyFilter('offerType', 'Free')"
              >Free</a
            >
          </li>
          <li>
            <a class="dropdown-item" (click)="applyFilter('offerType', 'Paid')"
              >Paid</a
            >
          </li>
        </ul>
      </div>
  
      <!-- Sex -->
      <div class="filter-dropdown">
        <button
          class="btn btn-light dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
         <i class="fas fa-venus-mars"></i> Pet Sex
        </button>
        <ul class="dropdown-menu">
          <li>
            <a class="dropdown-item" (click)="applyFilter('sex', '')">All</a>
          </li>
          <li>
            <a class="dropdown-item" (click)="applyFilter('sex', 'male')">Male</a>
          </li>
          <li>
            <a class="dropdown-item" (click)="applyFilter('sex', 'female')"
              >Female</a
            >
          </li>
        </ul>
      </div>
      <button class="btn btn-secondary ms-2" (click)="clearFilters()">
        <i class="fas fa-times"></i> Clear
      </button>
    </div>
  
    <!-- Offers Section -->
    <div class="offers-grid">
      <div
        class="offer-card"
        *ngFor="let offer of displayedOffers"
        (click)="toggleFlip(offer.id)"
      >
        <div class="card-inner" [class.flipped]="offer.isFlipped">
          <!-- Front Side -->
          <div
            class="card-front"
            [style.backgroundImage]="
              'url(' + getImageUrl(offer.pet.imagePath) + ')'
            "
          >
            <!-- Tag for Number of Days -->
            <div class="offer-tag">
              {{ calculateDays(offer.startDate, offer.endDate) }} Days
            </div>
  
            <!-- Free or Paid Tag -->
            <div class="offer-price-tag">
              <i
                class="fas"
                [ngClass]="offer.offerType === 'Free' ? 'fa-gift' : 'fa-coins'"
              ></i>
              {{
                offer.offerType === "Free"
                  ? "Free"
                  : offer.amountPerDay + " TND/Day"
              }}
            </div>
          </div>
  
          <!-- Back Side -->
          <div class="card-back">
            <div class="offer-details">
              <h3 class="offer-title">{{ offer.pet.name }}</h3>
              <p class="offer-location">
                <i class="fas fa-map-marker-alt"></i>
                {{ offer.locationInLetters }}
              </p>
              <p class="offer-dates">
                <i class="fas fa-calendar-alt"></i><strong>From</strong>
                {{ offer.startDate }} - <strong>To</strong> {{ offer.endDate }}
              </p>
              <div class="row g-1">
                <button
                  class="btn btn-primary"
                  (click)="viewPetDetail(offer.pet)"
                >
                  Pet Details
                </button>
                <button
                  class="btn btn-warning"
                  [disabled]="isOfferSent(offer)"
                >
                  Update Offer 
                </button>
                <button
                  class="btn btn-danger"
                  (click)="deleteOffer(offer.id)"
                >
                  Delete Sitting
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="show-more-container" *ngIf="offersToShow < offers.length">
      <button class="btn btn-outline-primary" (click)="showMoreOffers()">
        Show More
      </button>
    </div>
  </div>
  
  <app-public-pet-detail-modal
    [isVisible]="showDetailModal"
    (close)="closeDetailModal()"
    [pet]="selectedPet"
    [userId]="userId"
  ></app-public-pet-detail-modal>
  