<app-side-bar-user></app-side-bar-user>
<div class="dashboard-content">
    <div class="dashboard-header">
      <div class="header-left">
              <h1 class="dashboard-title">My Products</h1>
      </div>
    </div>
<div class="container mt-5">
    <!-- Conteneur pour les filtres -->
    <div class="row align-items-end mb-4">
    <!-- Bouton pour ajouter un nouveau produit -->
    <div class="mb-4">
      <a [routerLink]="['/formproduit']">
        <button class="btn btn-primary">Add product</button>
      </a>
    </div>
  
  <!-- ... tout le reste de ton code est inchang√© ... -->
  
    <!-- Affichage des produits -->
    <div class="row">
      <!-- Utilise paginatedProducts ici -->
      <div class="col-md-4 mb-4" *ngFor="let product of paginatedProducts">
        <div class="card product-card">
  
          <!-- Image du produit -->
          <img [src]="'http://localhost:8011/api/products/images/' + product.imageUrl"
               class="card-img-top"
               alt="{{ product.nom }}">
  
          <div class="card-body">
            <!-- Lien sur le nom du produit pour rediriger vers la page de d√©tail -->
            <h5 class="card-title">
              <a [routerLink]="['/product', product.id_Product]">{{ product.nom }}</a>
            </h5>
            
            <p class="card-text">{{ product.description }}</p>
            <p class="card-text"><strong>{{ product.prix }} TND</strong></p>
  

      
            <!-- Actions CRUD -->
     
            <div class="btn-group mt-2">
              <button class="btn btn-edit"
                      [routerLink]="['/edit-product', product.id_Product]">Edit</button>
  
              <button class="btn btn-delete"
                      *ngIf="product.id_Product"
                      (click)="deleteProduct(product.id_Product)">Delete</button>
                        </div> 
          </div>
        </div>
      </div>
    </div>
  
    <!-- ‚úÖ Nouvelle pagination avec num√©rotation -->
    <nav class="d-flex justify-content-center mt-4" *ngIf="totalPages > 1">
      <ul class="pagination">
        <!-- Pr√©c√©dent -->
        <li class="page-item" [class.disabled]="currentPage === 1">
          <a class="page-link" (click)="changePage(currentPage - 1)">¬´</a>
        </li>
  
        <!-- Num√©rotation des pages -->
        <li class="page-item"
            *ngFor="let page of [].constructor(totalPages); let i = index"
            [class.active]="currentPage === (i + 1)">
          <a class="page-link" (click)="changePage(i + 1)">
            {{ i + 1 }}
          </a>
        </li>
  
        <!-- Suivant -->
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <a class="page-link" (click)="changePage(currentPage + 1)">¬ª</a>
        </li>
      </ul>
    </nav>
  </div>
  
  <!-- Bouton flottant pour ouvrir le chatbot -->
  <button class="chat-toggle-btn" (click)="toggleChat()">
    üí¨
  </button>
  
  <!-- Fen√™tre du chatbot -->
  <div class="chat-window" [class.open]="chatOpen">
    <div class="chat-header">
      ü§ñ Assistant intelligent
      <button class="close-btn" (click)="toggleChat()">√ó</button>
    </div>
  
    <div class="chat-messages">
      <div *ngFor="let msg of messages">
        <div [ngClass]="msg.role === 'user' ? 'user-msg' : 'bot-msg'">
          {{ msg.content }}
        </div>
      </div>
    </div>
  
    <form (ngSubmit)="sendMessage()" class="chat-input">
      <input
        type="text"
        [(ngModel)]="userMessage"
        name="message"
        required
        placeholder="Quel est votre besoin ?"
      />
      <button type="submit" [disabled]="loadings">‚èé</button>
    </form>
  </div>
  