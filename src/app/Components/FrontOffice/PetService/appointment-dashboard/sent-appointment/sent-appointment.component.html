<div class="container col-12">
  <div class="card">
    <div class="card-header">
      <ul class="nav nav-tabs card-header-tabs" id="adoptionRequestTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <a class="nav-link" [class.active]="activeTab === 'pending'" (click)="setActiveTab('pending')">Pending</a>
        </li>
        <li class="nav-item" role="presentation">
          <a class="nav-link" [class.active]="activeTab === 'confirmed'" (click)="setActiveTab('confirmed')">Confirmed</a>
        </li>
        <li class="nav-item" role="presentation">
          <a class="nav-link" [class.active]="activeTab === 'rejected'" (click)="setActiveTab('rejected')">Rejected</a>
        </li>
      </ul>
    </div>

    <div class="card-body">
      <div class="tab-content" id="adoptionRequestTabsContent">

        <!-- Pending Tab -->
        <div class="tab-pane fade" [class.show]="activeTab === 'pending'" [class.active]="activeTab === 'pending'" id="pending">
          <div *ngIf="combinedPending.length > 0; else noPending">
            <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead class="thead-light">
                  <tr>
                    <th>Service</th>
                    <th>Description</th>
                    <th>Address</th>
                    <th>Date</th>
                    <th>Reason</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of combinedPending">
                    <td>{{ item.service?.name || 'Unknown' }}</td>
                    <td>{{ item.service?.description }}</td>
                    <td>{{ item.service?.address }}</td>
                    <td>{{ item.appointment.dateAppointment | date: 'short' }}</td>
                    <td>{{ item.appointment.reason }}</td>
                    <td>{{ item.appointment.status }}</td>
                    <td>
                      <button class="btn btn-danger btn-sm" (click)="deleteAppointment(item.appointment.idAppointment)">Delete</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <ng-template #noPending><p>No pending appointments.</p></ng-template>
        </div>

        <!-- Confirmed Tab -->
        <div class="tab-pane fade" [class.show]="activeTab === 'confirmed'" [class.active]="activeTab === 'confirmed'" id="confirmed">
          <div *ngIf="combinedConfirmed.length > 0; else noConfirmed">
            <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead class="thead-light">
                  <tr>
                    <th>Service</th>
                    <th>Description</th>
                    <th>Address</th>
                    <th>Date</th>
                    <th>Reason</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of combinedConfirmed">
                    <td>{{ item.service?.name || 'Unknown' }}</td>
                    <td>{{ item.service?.description }}</td>
                    <td>{{ item.service?.address }}</td>
                    <td>{{ item.appointment.dateAppointment | date: 'short' }}</td>
                    <td>{{ item.appointment.reason }}</td>
                    <td>{{ item.appointment.status }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <ng-template #noConfirmed><p>No confirmed appointments.</p></ng-template>
        </div>

        <!-- Rejected Tab -->
        <div class="tab-pane fade" [class.show]="activeTab === 'rejected'" [class.active]="activeTab === 'rejected'" id="rejected">
          <div *ngIf="combinedRejected.length > 0; else noRejected">
            <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead class="thead-light">
                  <tr>
                    <th>Service</th>
                    <th>Description</th>
                    <th>Address</th>
                    <th>Date</th>
                    <th>Reason</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of combinedRejected">
                    <td>{{ item.service?.name || 'Unknown' }}</td>
                    <td>{{ item.service?.description }}</td>
                    <td>{{ item.service?.address }}</td>
                    <td>{{ item.appointment.dateAppointment | date: 'short' }}</td>
                    <td>{{ item.appointment.reason }}</td>
                    <td>{{ item.appointment.status }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <ng-template #noRejected><p>No rejected appointments.</p></ng-template>
        </div>
      </div>
    </div>
  </div>
</div>
